"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var sdk=require("@builder.io/sdk"),core=require("@emotion/core"),React=require("react"),ReactDOM=require("react-dom"),hash=require("hash-sum");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function _interopNamespace(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var React__default=_interopDefaultLegacy(React),React__namespace=_interopNamespace(React),ReactDOM__default=_interopDefaultLegacy(ReactDOM),hash__default=_interopDefaultLegacy(hash),version="1.1.54",_a;"undefined"!=typeof window&&(null===(_a=window.parent)||void 0===_a||_a.postMessage({type:"builder.isReactSdk",data:{value:!0,supportsPatchUpdates:"v3",priorVersion:version}},"*"))
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */;var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function __decorate(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))}function __generator(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function __spreadArray(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}var sizeNames=["xsmall","small","medium","large"],sizes={xsmall:{min:0,default:0,max:0},small:{min:320,default:321,max:640},medium:{min:641,default:642,max:991},large:{min:990,default:991,max:1200},getWidthForSize:function(e){return this[e].default},getSizeForWidth:function(e){for(var t=0,n=sizeNames;t<n.length;t++){var r=n[t];if(e<=this[r].max)return r}return"large"}},set=function(e,t,n){if(Object(e)!==e)return e;var r=Array.isArray(t)?t:t.toString().match(/[^.[\]]+/g);return r.slice(0,-1).reduce((function(e,t,n){return Object(e[t])===e[t]?e[t]:e[t]=Math.abs(Number(r[n+1]))>>0==+r[n+1]?[]:{}}),e)[r[r.length-1]]=n,e},safeDynamicRequire=sdk.Builder.isServer?eval("require"):function(){return null},fnCache={},api=function(e){return sdk.builder};function stringToFunction(e,t,n,r){if(void 0===t&&(t=!0),!e||!e.trim())return function(){};var i=e+":"+t;if(fnCache[i])return fnCache[i];var a=t&&!(e.includes(";")||e.includes(" return ")||e.trim().startsWith("return "))||e.trim().startsWith("builder.run"),o=function(){};try{sdk.Builder.isBrowser&&(o=new Function("state","event","block","builder","Device","update","Builder","context","\n          var names = [\n            'state',\n            'event',\n            'block',\n            'builder',\n            'Device',\n            'update',\n            'Builder',\n            'context'\n          ];\n          var rootState = state;\n          if (typeof Proxy !== 'undefined') {\n            rootState = new Proxy(rootState, {\n              set: function () {\n                return false;\n              },\n              get: function (target, key) {\n                if (names.includes(key)) {\n                  return undefined;\n                }\n                return target[key];\n              }\n            });\n          }\n          /* Alias */\n          var ctx = context;\n          with (rootState) {\n            ".concat(a?"return (".concat(e,");"):e,";\n          }\n        ")))}catch(t){n&&n.push(t);var s=t&&t.message;s&&"string"==typeof s&&r&&-1===r.indexOf(s)&&r.push(s),sdk.Builder.isBrowser&&console.warn("Function compile error in ".concat(e),t)}var l=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{if(sdk.Builder.isBrowser)return o.apply(void 0,t);var i=safeDynamicRequire("vm2").VM,a=t[0],s=t[1];return new i({timeout:100,sandbox:__assign(__assign(__assign(__assign({},a),{state:a}),{builder:api}),{event:s})}).run(e.replace(/(^|;)return /,"$1"))}catch(t){sdk.Builder.isBrowser?console.warn("Builder custom code error:",t.message||t,"in",e,t.stack||t):process.env.DEBUG&&console.debug("Builder custom code error:",t.message||t,"in",e,t.stack||t),n&&n.push(t)}};return sdk.Builder.isBrowser&&(fnCache[i]=l),l}var isPromise=function(e){return"function"==typeof e.then},isRequestInfo=function(e){return!isPromise(e)},BuilderAsyncRequestsContext=React__default.default.createContext({requests:[],errors:[],logs:[]}),BuilderStoreContext=React__default.default.createContext({state:{},rootState:{},content:{},context:{},update:function(e){return null}}),applyPatchWithMinimalMutationChain=function(e,t,n){if(void 0===n&&(n=!0),Object(e)!==e)return e;var r=t.path,i=t.op,a=t.value,o=r.split(/\//);""===o[0]&&o.shift();for(var s=n?e:__assign({},e),l=s,u=0;u<o.length;u++){var d=u===o.length-1,c=o[u];if(d){if("replace"===i)l[c]=a;else if("add"===i){var p=Number(c);Array.isArray(l)?"-"===c?l.push(a):l.splice(p,0,a):l[c]=a}else if("remove"===i){p=Number(c);Array.isArray(l)?l.splice(p,1):delete l[c]}}else{var f=o[u+1],v=Object(l[c])===l[c]?l[c]:String(Number(f))===f?[]:{};l=l[c]=Array.isArray(v)?__spreadArray([],v):__assign({},v)}}return s},htmlEscape=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},blockToHtmlString=function(e){var t;return"<".concat(htmlEscape(e.tagName||"div"),' \n    class="builder-block ').concat(e.id," ").concat(e.class||"",'"\n    builder-id="').concat(e.id,'"\n  ').concat(Object.keys(e.properties||{}).map((function(t){return"".concat(htmlEscape(t),'="').concat(htmlEscape(e.properties[t]),'"')})).join(" "),"\n  >").concat("Text"===(null===(t=null==e?void 0:e.component)||void 0===t?void 0:t.name)?e.component.options.text:e.children?e.children.map((function(e){return blockToHtmlString(e)})).join(""):"","</").concat(e.tagName||"div",">").replace(/\s+/g," ")},Link=function(e){return React__default.default.createElement(BuilderStoreContext.Consumer,null,(function(t){return t.renderLink?t.renderLink(e):React__default.default.createElement("a",__assign({},e))}))},camelCaseToKebabCase=function(e){return e?e.replace(/([A-Z])/g,(function(e){return"-".concat(e[0].toLowerCase())})):""},kebabCaseToCamelCase=function(e){return void 0===e&&(e=""),e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))},Device={desktop:0,tablet:1,mobile:2},blocksMap={},voidElements=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","textarea"]),last=function(e){return e[e.length-1]};function omit$1(e,t){for(var n=Object.assign({},e),r=0,i=t;r<i.length;r++){delete n[i[r]]}return n}var cssCase=function(e){if(!e)return e;var t=camelCaseToKebabCase(e);return e[0]===e[0].toUpperCase()&&(t="-"+t),t},fastClone=function(e){return JSON.parse(JSON.stringify(e))};function capitalize(e){if(e)return e[0].toUpperCase()+e.slice(1)}var BuilderBlock=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasError:!1,updates:0},t.privateState={state:{},rootState:{},context:{},update:function(){}},t.onWindowMessage=function(e){var n=e.data;if(n)switch(n.type){case"builder.selectionChange":if(!(a=n.data))break;var r=a.selection,i=t.block&&t.block.id;i&&Array.isArray(r)&&r.indexOf(i)>-1&&setTimeout((function(){window.$block=t,window.$blocks||(window.$blocks=[]),window.$blocks.push(t)}));break;case"builder.patchUpdates":var a;if(!(a=n.data)||!a.data)break;var o=a.data[t.block.id];if(!o)return;location.href.includes("builder.debug=true")&&t.eval("debugger");for(var s=__assign({},t.block),l=0,u=o;l<u.length;l++){var d=u[l];applyPatchWithMinimalMutationChain(s,d)}blocksMap[t.props.block.id]=s,t.setState({updates:t.state.updates+1})}},t}return __extends(t,e),Object.defineProperty(t.prototype,"store",{get:function(){return this.privateState},enumerable:!1,configurable:!0}),t.getDerivedStateFromError=function(e){return{hasError:!0}},t.prototype.componentDidCatch=function(e,t){console.error("Builder block error:",e,t)},t.prototype.stringToFunction=function(e,t){return void 0===t&&(t=!0),stringToFunction(e,t,this._errors,this._logs)},Object.defineProperty(t.prototype,"block",{get:function(){return blocksMap[this.props.block.id]||this.props.block},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emotionCss",{get:function(){var e,t,n,r=this.block;if(sdk.Builder.isServer){var i=r.animations&&r.animations[0];if(i&&"hover"!==i.trigger){var a=i&&i.steps&&i.steps[0],o=a&&a.styles;o&&(n=o)}}var s=sizeNames.slice().reverse(),l=this.block,u={};if(l.responsiveStyles)for(var d=0,c=s;d<c.length;d++){var p=c[d];"large"===p?this.props.emailMode||(u["&.builder-block"]=Object.assign({},l.responsiveStyles[p],n)):u["@media only screen and (max-width: ".concat(sizes[p].max,"px)")]={"&.builder-block":l.responsiveStyles[p]}}var f=r.animations&&r.animations.find((function(e){return"hover"===e.trigger}));return f&&(u[":hover"]=(null===(t=null===(e=f.steps)||void 0===e?void 0:e[1])||void 0===t?void 0:t.styles)||{},u.transition="all ".concat(f.duration,"s ").concat(camelCaseToKebabCase(f.easing)),f.delay&&(u.transitionDelay=f.delay+"s")),u},enumerable:!1,configurable:!0}),t.prototype.eval=function(e){return this.stringToFunction(e)(this.privateState.state,void 0,this.block,sdk.builder,Device,this.privateState.update,sdk.Builder,this.privateState.context)},t.prototype.componentWillUnmount=function(){sdk.Builder.isEditing&&removeEventListener("message",this.onWindowMessage)},t.prototype.componentDidMount=function(){var e,t=this,n=this.block,r=n&&n.animations;if(sdk.Builder.isEditing&&addEventListener("message",this.onWindowMessage),r){var i={animations:fastClone(r)};if(n.bindings)for(var a in n.bindings)if((null===(e=a.trim)||void 0===e?void 0:e.call(a))&&a.startsWith("animations.")){var o=this.stringToFunction(n.bindings[a]);void 0!==o&&set(i,a,o(this.privateState.state,null,n,sdk.builder,null,null,sdk.Builder,this.privateState.context))}sdk.Builder.animator.bindAnimations(i.animations.filter((function(e){return"hover"!==e.trigger})).map((function(e){return __assign(__assign({},e),{elementId:t.block.id})})))}},t.prototype.getElement=function(e,n){var r,i,a,o,s,l=this;void 0===e&&(e=0),void 0===n&&(n=this.privateState.state);var u=this.props;u.child,u.fieldName;var d,c=this.block,p=(c.tagName||"div").toLowerCase();if("template"===p){var f=c.children?c.children.map((function(e){return blockToHtmlString(e)})).join(" "):"";return console.debug("template html",f),core.jsx("template",__assign({},c.properties,{dangerouslySetInnerHTML:{__html:f}}))}var v=c.component&&(c.component.name||c.component.component),h=null;c.component&&!c.component.class&&(c.component&&c.component.tag?d=c.component.tag:(h=sdk.Builder.components.find((function(e){return e.name===v}))||null)&&h.class?d=h.class:h&&h.tag?d=h.tag:(null==v?void 0:v.startsWith("Builder:"))?console.warn("Missing @builder.io/widgets installation, please install and import @builder.io/widgets to use ".concat(v.split(":")[1]," in your content, more info here: https://github.com/BuilderIO/builder/tree/main/packages/widgets")):v&&console.warn("Missing registration for ".concat(v,", have you included the registration in your bundle?")));var m=__assign(__assign({},c.properties),{style:{}});if(m=__assign(__assign({},m.properties),m),c.component&&(m.component=fastClone(c.component)),c.bindings)for(var g in c.bindings)if(null===(i=g.trim)||void 0===i?void 0:i.call(g)){var b=this.stringToFunction(c.bindings[g]);set(m,g,b(n,null,c,api(),Device,null,sdk.Builder,this.privateState.context))}if(m.hide)return null;if(delete m.hide,("show"in m||c.bindings&&c.bindings.show)&&!m.show)return null;if(delete m.show,c.actions){var _=function(e){if(!(null===(a=e.trim)||void 0===a?void 0:a.call(e)))return"continue";var t=c.actions[e];m["on"+capitalize(e)]=function(e){var r=n;return"undefined"!=typeof Proxy&&(r=new Proxy(n,{set:function(e,t,n){return e[t]=n,l.privateState.rootState[t]=n,!0}})),l.stringToFunction(t,!1)(r,e,l.block,sdk.builder,Device,l.privateState.update,sdk.Builder,l.privateState.context)}};for(var g in c.actions)_(g)}var y=(m.component||m.options)&&__assign(__assign({},m.options),m.component.options||m.component.data),k=voidElements.has(p),B=h&&(h.fragment||h.noWrap),C=(null===(o=m.attr)||void 0===o?void 0:o.style)||("string"==typeof m.style?m.style:"")||"";if("string"==typeof C){"object"!=typeof m.style&&(m.style={});for(var S=0,w=C.split(";");S<w.length;S++){var x=w[S].split(":");if(!x.length)return;g=x[0],b=x[1];x.length>2&&(b=x.slice(1).join(":")),m.style[kebabCaseToCamelCase(g)]=b}}var R=__assign(__assign(__assign({},omit$1(m,["class","component","attr"])),((r={})["string"!=typeof p||p.includes("-")?"class":"className"]="builder-block ".concat(this.id).concat(c.class?" ".concat(c.class):"").concat(!c.component||["Image","Video","Banner"].indexOf(v)>-1?"":" builder-has-component")+(m.class?" "+m.class:"")+(sdk.Builder.isEditing&&(null===(s=this.privateState.state._spacer)||void 0===s?void 0:s.parent)===c.id?" builder-spacer-parent":""),r.key=this.id+e,r["builder-id"]=this.id,r)),0!==e&&{"builder-index":e});sdk.Builder.isEditing&&(R["builder-inline-styles"]=m.attr&&m.attr.style?Object.keys(m.style).reduce((function(e,t){return(e?"".concat(e,";"):"")+"".concat(cssCase(t),":").concat(m.style[t],";")}),""):""),(R.properties&&R.properties.href||R.href)&&"div"===p&&(p="a"),"a"===p&&(p=Link);var E=c.children||R.children||[];return core.jsx(React__default.default.Fragment,null,core.jsx(core.ClassNames,null,(function(e){var n=e.css;if(e.cx,!l.props.emailMode){var r=" "+n(l.emotionCss);R.class&&(R.class+=r),R.className&&(R.className+=r)}return core.jsx(BuilderAsyncRequestsContext.Consumer,null,(function(e){return l._asyncRequests=e&&e.requests,l._errors=e&&e.errors,l._logs=e&&e.logs,k?core.jsx(p,__assign({},R)):d&&(B||l.props.emailMode)?core.jsx(d,__assign({},y,{attributes:R,builderBlock:c,builderState:l.privateState})):core.jsx(p,__assign({},R),d&&core.jsx(d,__assign({builderState:l.privateState,builderBlock:c},y)),c.text||m.text?m.text:!d&&E&&Array.isArray(E)&&E.length?E.map((function(e,n){return core.jsx(t,{key:(l.id||"")+n,block:e,index:n,size:l.props.size,fieldName:l.props.fieldName,child:l.props.child,emailMode:l.props.emailMode})})):null)}))})))},Object.defineProperty(t.prototype,"id",{get:function(){var e=this.block;return e.id.startsWith("builder")?e.id:"builder-"+e.id},enumerable:!1,configurable:!0}),t.prototype.contents=function(e){var t=this,n=this.block;if(this.privateState=e,n.repeat&&n.repeat.collection){var r=n.repeat.collection,i=last((r||"").trim().split("(")[0].trim().split(".")),a=n.repeat.itemName||(i?i+"Item":"item"),o=this.stringToFunction(r)(e.state,null,n,api(),Device,null,sdk.Builder,this.privateState.context);return Array.isArray(o)?o.map((function(n,r){var i,o=__assign(__assign({},e.state),((i={$index:r,$item:n})[a]=n,i["$".concat(a,"Index")]=r,i));return core.jsx(BuilderStoreContext.Provider,{key:r,value:__assign(__assign({},e),{state:o})},t.getElement(r,o))})):null}return this.getElement()},t.prototype.render=function(){var e=this;return this.state.hasError?core.jsx("span",{css:{display:"inline-block",padding:5,color:"#999",fontSize:11,fontStyle:"italic"}},"Builder block error :( Check console for details"):core.jsx(BuilderStoreContext.Consumer,null,(function(t){return e.contents(t)}))},t}(React__default.default.Component),BuilderBlocks=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickEmptyBlocks=function(){var e;sdk.Builder.isIframe&&t.noBlocks&&(null===(e=window.parent)||void 0===e||e.postMessage({type:"builder.clickEmptyBlocks",data:{parentElementId:t.parentId,dataPath:t.path}},"*"))},t.onHoverEmptyBlocks=function(){var e;sdk.Builder.isEditing&&t.noBlocks&&(null===(e=window.parent)||void 0===e||e.postMessage({type:"builder.hoverEmptyBlocks",data:{parentElementId:t.parentId,dataPath:t.path}},"*"))},t}return __extends(t,e),Object.defineProperty(t.prototype,"isRoot",{get:function(){return!this.props.child},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noBlocks",{get:function(){var e=this.props.blocks;return!(e&&e.length)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){var e=this.props.dataPath||"";return e.trim()&&(e.startsWith("this.")?e=e.replace("this.",""):e.startsWith("component.options.")||(e="component.options."+e)),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentId",{get:function(){return this.props.parentElementId?this.props.parentElementId:this.props.parent&&this.props.parent.id},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this,t=this.props.blocks,n=this.props.emailMode?"span":"div";return core.jsx(n,__assign({className:"builder-blocks"+(this.noBlocks?" no-blocks":"")+(this.props.child?" builder-blocks-child":"")+(this.props.className?" "+this.props.className:""),"builder-type":"blocks","builder-path":sdk.Builder.isIframe?this.path:void 0,"builder-parent-id":this.parentId,css:__assign(__assign({},!this.props.emailMode&&{display:"flex",flexDirection:"column",alignItems:"stretch"}),this.props.style),onClick:function(){e.noBlocks&&e.onClickEmptyBlocks()}},sdk.Builder.isEditing&&{onMouseEnter:function(){return e.onHoverEmptyBlocks()}}),t&&Array.isArray(t)&&t.map((function(t,n){return t&&"@builder.io/sdk:Element"===t["@type"]?core.jsx(BuilderBlock,{key:t.id,block:t,index:n,fieldName:e.props.fieldName,child:e.props.child,emailMode:e.props.emailMode}):t}))||t)},t.renderInto=function(e,n,r){if(void 0===n&&(n={}),e){var i=null;return"string"==typeof e?i=document.querySelector(e):e instanceof Element&&(i=e),ReactDOM__default.default.render(core.jsx(BuilderStoreContext.Provider,{value:r},core.jsx(t,__assign({},n))),i)}},t}(React__default.default.Component),NoWrap=function(e){return e.children};function getData(e){if(void 0!==(null==e?void 0:e.data)){var t=e.data,n=t.blocks,r=t.blocksString,i=Array.isArray(n)||"string"==typeof r,a=__assign(__assign({},e.data),i&&{blocks:n||JSON.parse(r)});return delete a.blocksString,a}}var variantsScript=function(e,t){return"\n(function() {\n  if (window.builderNoTrack) {\n    return;\n  }\n\n  var variants = ".concat(e,';\n  function removeVariants() {\n    variants.forEach(function (template) {\n      document.querySelector(\'template[data-template-variant-id="\' + template.id + \'"]\').remove();\n    });\n  }\n\n  if (typeof document.createElement("template").content === \'undefined\') {\n    removeVariants();\n    return ;\n  }\n\n  function setCookie(name,value,days) {\n    var expires = "";\n    if (days) {\n        var date = new Date();\n        date.setTime(date.getTime() + (days*24*60*60*1000));\n        expires = "; expires=" + date.toUTCString();\n    }\n    document.cookie = name + "=" + (value || "")  + expires + "; path=/" + "; Secure; SameSite=None";\n  }\n\n  function getCookie(name) {\n    var nameEQ = name + "=";\n    var ca = document.cookie.split(\';\');\n    for(var i=0;i < ca.length;i++) {\n        var c = ca[i];\n        while (c.charAt(0)==\' \') c = c.substring(1,c.length);\n        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\n    }\n    return null;\n  }\n  var cookieName = \'builder.tests.').concat(t,"';\n  var variantInCookie = getCookie(cookieName);\n  var availableIDs = variants.map(function(vr) { return vr.id }).concat('").concat(t,"');\n  var variantId;\n  if (availableIDs.indexOf(variantInCookie) > -1) {\n    variantId = variantInCookie;\n  }\n  if (!variantId) {\n    var n = 0;\n    var random = Math.random();\n    for (var i = 0; i < variants.length; i++) {\n      var variant = variants[i];\n      var testRatio = variant.testRatio;\n      n += testRatio;\n      if (random < n) {\n        setCookie(cookieName, variant.id);\n        variantId = variant.id;\n        break;\n      }\n    }\n    if (!variantId) {\n      variantId = \"").concat(t,'";\n      setCookie(cookieName, "').concat(t,'");\n    }\n  }\n  if (variantId && variantId !== "').concat(t,"\") {\n    var winningTemplate = document.querySelector('template[data-template-variant-id=\"' + variantId + '\"]');\n    if (winningTemplate) {\n      var parentNode = winningTemplate.parentNode;\n      var newParent = parentNode.cloneNode(false);\n      newParent.appendChild(winningTemplate.content.firstChild);\n      parentNode.parentNode.replaceChild(newParent, parentNode);\n    }\n  } else if (variants.length > 0) {\n    removeVariants();\n  }\n})()").replace(/\s+/g," ")},VariantsProvider=function(e){var t=e.initialContent,n=e.children;if(sdk.Builder.isBrowser&&!sdk.builder.canTrack)return n([t]);if(!Boolean(Object.keys((null==t?void 0:t.variations)||{}).length))return n([t]);var r=Object.keys(t.variations).map((function(e){return __assign(__assign({id:e},t.variations[e]),{data:getData(t.variations[e])})})),i=__spreadArray(__spreadArray([],r,!0),[t]);if(sdk.Builder.isServer){var a=JSON.stringify(Object.keys(t.variations||{}).map((function(e){return{id:e,testRatio:t.variations[e].testRatio}})));return React__namespace.createElement(React__namespace.Fragment,null,n(i,(function(){return React__namespace.createElement("script",{dangerouslySetInnerHTML:{__html:variantsScript(a,t.id)}})})))}var o="builder.tests.".concat(t.id),s=sdk.builder.getCookie(o);if(!s&&sdk.Builder.isBrowser)for(var l=0,u=Math.random(),d=0;d<r.length;d++){var c=r[d];if(u<(l+=c.testRatio)){sdk.builder.setCookie(o,c.id),s=c.id;break}}return s||(s=t.id,sdk.builder.setCookie(o,s)),n([i.find((function(e){return e.id===s}))])},BuilderContent=function(_super){function BuilderContent(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.ref=null,_this.state={loading:!_this.props.content,data:getContentWithInfo(_this.props.content),updates:1},_this.onWindowMessage=function(event){var _a,_b,_c,message=event.data;if(message)switch(message.type){case"builder.patchUpdates":if(null===(_a=_this.props.options)||void 0===_a?void 0:_a.noEditorUpdates)return;var data=message.data;if(!data||!data.data)break;var patches=data.data[null===(_b=_this.state.data)||void 0===_b?void 0:_b.id];if(!patches||!patches.length)return;location.href.includes("builder.debug=true")&&eval("debugger");for(var _i=0,patches_1=patches;_i<patches_1.length;_i++){var patch=patches_1[_i];applyPatchWithMinimalMutationChain(_this.state.data,patch)}_this.setState({updates:_this.state.updates+1,data:_this.state.data?__assign({},_this.state.data):_this.state.data}),_this.props.contentLoaded&&_this.props.contentLoaded(null===(_c=_this.state.data)||void 0===_c?void 0:_c.data,_this.state.data)}},_this.subscriptions=new sdk.Subscription,_this.firstLoad=!0,_this.clicked=!1,_this.trackedImpression=!1,_this.intersectionObserver=null,_this.onClick=function(e){var t=e.nativeEvent,n=_this.data;n&&(sdk.builder.autoTrack&&_this.builder.trackInteraction(n.id,_this.renderedVariantId,_this.clicked,t,{content:n}),_this.clicked||(_this.clicked=!0))},_this}return __extends(BuilderContent,_super),Object.defineProperty(BuilderContent.prototype,"builder",{get:function(){return this.props.builder||sdk.builder},enumerable:!1,configurable:!0}),Object.defineProperty(BuilderContent.prototype,"name",{get:function(){var e=this.props;return"model"in e?e.model:e.modelName},enumerable:!1,configurable:!0}),Object.defineProperty(BuilderContent.prototype,"renderedVariantId",{get:function(){var e,t,n=this.props.isStatic?this.builder.getCookie("builder.tests.".concat(null===(e=this.data)||void 0===e?void 0:e.id)):null===(t=this.data)||void 0===t?void 0:t.variationId;if(null!==n)return n},enumerable:!1,configurable:!0}),Object.defineProperty(BuilderContent.prototype,"options",{get:function(){var e,t,n=__assign({},this.props.options||{});return!n.key&&(null===(e=this.props.content)||void 0===e?void 0:e.id)&&(n.key=this.props.content.id),this.props.content&&!(null===(t=n.initialContent)||void 0===t?void 0:t.length)&&(n.initialContent=[this.props.content]),n},enumerable:!1,configurable:!0}),Object.defineProperty(BuilderContent.prototype,"data",{get:function(){var e=(this.props.inline||!sdk.Builder.isBrowser||this.firstLoad)&&this.options.initialContent&&this.options.initialContent[0]||this.state.data;return getContentWithInfo(e)},enumerable:!1,configurable:!0}),BuilderContent.prototype.componentDidMount=function(){var e,t;if(!this.props.inline||sdk.Builder.isEditing)this.subscribeToContent();else if(this.props.inline&&(null===(t=null===(e=this.options)||void 0===e?void 0:e.initialContent)||void 0===t?void 0:t.length)){var n=this.options.initialContent[0];(null==n?void 0:n.id)&&this.builder.trackImpression(n.id,this.renderedVariantId,void 0,{content:n})}sdk.Builder.isEditing&&addEventListener("message",this.onWindowMessage)},BuilderContent.prototype.subscribeToContent=function(){var e=this;"_inline"!==this.name&&this.subscriptions.add(sdk.builder.queueGetContent(this.name,this.options).subscribe((function(t){var n=t&&t[0];if(e.setState({data:n,loading:!1}),n&&e.firstLoad&&(e.firstLoad=!1,sdk.builder.autoTrack&&!sdk.Builder.isEditing)){var r=!1;if("function"==typeof IntersectionObserver&&e.ref)try{(e.intersectionObserver=new IntersectionObserver((function(t,r){t.forEach((function(t){t.intersectionRatio>0&&!e.trackedImpression&&(e.builder.trackImpression(n.id,e.renderedVariantId,void 0,{content:e.data}),e.data,e.trackedImpression=!0,e.ref&&r.unobserve(e.ref))}))}))).observe(e.ref),r=!0}catch(e){console.warn("Could not bind intersection observer")}r||(e.trackedImpression=!0,e.builder.trackImpression(n.id,e.renderedVariantId,void 0,{content:n}))}e.props.contentLoaded&&e.props.contentLoaded(n&&n.data,n)}),(function(t){e.props.contentError&&(e.props.contentError(t),e.setState({loading:!1}))})))},BuilderContent.prototype.componentWillUnmount=function(){sdk.Builder.isEditing&&removeEventListener("message",this.onWindowMessage),this.subscriptions.unsubscribe(),this.intersectionObserver&&this.ref&&this.intersectionObserver.unobserve(this.ref)},BuilderContent.prototype.render=function(){var e=this;if(this.props.dataOnly)return null;var t=this.state.loading,n=this.data,r=this.props.dataOnly?NoWrap:"div";return React__default.default.createElement(VariantsProvider,{initialContent:n},(function(i,a){return React__default.default.createElement(React__default.default.Fragment,null,i.map((function(o,s){var l=s===i.length-1?React__default.default.Fragment:"template";return React__default.default.createElement(React__default.default.Fragment,{key:String((null==o?void 0:o.id)+s)},"template"!==l&&(null==a?void 0:a()),React__default.default.createElement(l,__assign({key:String((null==o?void 0:o.id)+s)},"template"===l&&{"data-template-variant-id":null==o?void 0:o.id}),React__default.default.createElement(r,__assign({},0===s&&!e.props.dataOnly&&{ref:function(t){return e.ref=t}},{className:"builder-content",onClick:e.onClick,"builder-content-id":null==o?void 0:o.id,"builder-model":e.name}),e.props.children(null==o?void 0:o.data,!e.props.inline&&t,n))))})))}))},BuilderContent}(React__default.default.Component),getContentWithInfo=function(e){var t;if(e){var n=sdk.builder.getCookie("builder.tests.".concat(e.id)),r=n===e.id?e:null===(t=e.variations)||void 0===t?void 0:t[n],i=(null==r?void 0:r.name)||((null==r?void 0:r.id)===e.id?"Default variation":"");return __assign(__assign({},e),{variationId:n,testVariationId:n,testVariationName:i})}return null};function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var onChange_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Symbol("target"),r=Symbol("unsubscribe"),i=function(e,t){return t&&t.toString&&(e&&(e+="."),e+=t.toString()),e},a=function(e){return Array.isArray(e)?e.slice():Object.assign({},e)},o=function(e,t,o){if("undefined"==typeof Proxy)return e;void 0===o&&(o={});var s,l,u=Symbol("ProxyTarget"),d=!1,c=!1,p=!1,f=o.equals||Object.is,v=new WeakMap,h=new WeakMap,m=new WeakMap,g=function(e,n,r,o){if(!p)if(d){if(d&&l&&void 0!==r&&void 0!==o&&"length"!==n){var u=l;e!==s&&function(e,t){for(var n;e;)-1===(n=e.indexOf("."))&&(n=e.length),t(e.slice(0,n)),e=e.slice(n+1)}(e=e.replace(s,"").slice(1),(function(e){u[e]=a(u[e]),u=u[e]})),u[n]=r}c=!0}else t(i(e,n),o,r)},b=function(e,t){var n=v?v.get(e):void 0;n&&n.delete(t)},_=function(e,t){if(p)return e;h.set(e,t);var n=m.get(e);return void 0===n&&(n=new Proxy(e,k),m.set(e,n)),n},y=function(e){return p||!0===o.ignoreSymbols&&"symbol"==typeof e},k={get:function(e,t,a){if(t===u||t===n)return e;if(t===r&&""===h.get(e))return function(e){return p=!0,v=null,h=null,m=null,e}(e);var s=Reflect.get(e,t,a);if(function(e){return null===e||"object"!=typeof e&&"function"!=typeof e}(s)||function(e){return e instanceof RegExp||e instanceof Number}(s)||"constructor"===t||!0===o.isShallow)return s;var l=function(e,t){var n=v?v.get(e):void 0;if(n)return n;n=new Map,v.set(e,n);var r=n.get(t);return r||(r=Reflect.getOwnPropertyDescriptor(e,t),n.set(t,r)),r}(e,t);if(l&&!l.configurable){if(l.set&&!l.get)return;if(!1===l.writable)return s}return _(s,i(h.get(e),t))},set:function(e,t,n,r){n&&void 0!==n[u]&&(n=n[u]);var i=y(t),a=i?null:Reflect.get(e,t,r),o=Reflect.set(e[u]||e,t,n);return i||f(a,n)||g(h.get(e),t,a,n),o},defineProperty:function(e,t,n){var r=Reflect.defineProperty(e,t,n);return y(t)||(b(e,t),g(h.get(e),t,void 0,n.value)),r},deleteProperty:function(e,t){if(!Reflect.has(e,t))return!0;var n=y(t),r=n?null:Reflect.get(e,t),i=Reflect.deleteProperty(e,t);return n||(b(e,t),g(h.get(e),t,r)),i},apply:function(e,t,n){var r=t instanceof Date;if(r&&(t=t[u]),!d){d=!0,r&&(l=t.valueOf()),(Array.isArray(t)||"[object Object]"===toString.call(t))&&(l=a(t[u])),s=(s=h.get(e)).slice(0,Math.max(s.lastIndexOf("."),0));var i=Reflect.apply(e,t,n);return d=!1,(c||r&&!f(l,t.valueOf()))&&(g(s,"",l,t[u]||t),l=null,c=!1),i}return Reflect.apply(e,t,n)}},B=_(e,"");return t=t.bind(B),B};o.target=function(e){return e[n]||e},o.unsubscribe=function(e){return e[r]||e},e.exports=o,t.default=o})),onChange=unwrapExports(onChange_1),nextTick=sdk.Builder.nextTick;function debounceNextTick(e,t,n){return void 0===t&&"function"==typeof e?debounceNextTickImpl(e):{configurable:!0,enumerable:n.enumerable,get:function(){return Object.defineProperty(this,t,{configurable:!0,enumerable:n.enumerable,value:debounceNextTickImpl(n.value)}),this[t]}}}function debounceNextTickImpl(e){var t=null,n=null;return function(){var e=t;if(t=[].slice.call(arguments),n=this,null!==e)return;nextTick(r)};function r(){e.apply(n,t),t=null,n=null}}function throttle(e,t,n){var r,i,a;void 0===n&&(n={});var o=null,s=0,l=function(){s=!1===n.leading?0:Date.now(),o=null,a=e.apply(r,i),o||(r=i=null)};return function(){var u=Date.now();s||!1!==n.leading||(s=u);var d=t-(u-s);return r=this,i=arguments,d<=0||d>t?(o&&(clearTimeout(o),o=null),s=u,a=e.apply(r,i),o||(r=i=null)):o||!1===n.trailing||(o=setTimeout(l,d)),a}}var BuilderMetaContext=React__default.default.createContext({emailMode:!1,ampMode:!1,isServer:!1});function pick(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r={};return t.forEach((function(t){r[t]=e[t]})),r}function omit(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=__assign({},e);return t.forEach((function(e){delete r[e]})),r}var wrapComponent=function(e){return function(t){var n,r=t.builderTag||"div",i=["children"].concat((null===(n=e.inputs)||void 0===n?void 0:n.map((function(e){return e.name})))||[]),a=omit.apply(void 0,__spreadArray(__spreadArray([t],i,!1),["attributes"])),o=t;return e.noWrap?React__default.default.createElement(e.class,__assign({attributes:a},o)):React__default.default.createElement(r,__assign({},a),React__default.default.createElement(e.class,__assign({},o)))}},size=function(e){return Object.keys(e).length};function debounce(e,t,n){var r;return void 0===n&&(n=!1),function(){var i=this,a=arguments;clearTimeout(r),r=setTimeout((function(){r=null,n||e.apply(i,a)}),t),n&&!r&&e.apply(i,a)}}var fontsLoaded=new Set,fetch=sdk.Builder.isBrowser?window.fetch:require("node-fetch"),sizeMap={desktop:"large",tablet:"medium",mobile:"small"},fetchCache={},tryEval=function(e,t,n){void 0===t&&(t={});var r=e;if("string"==typeof r&&r.trim()){var i=!(r.includes(";")||r.includes(" return ")),a=function(){};try{sdk.Builder.isBrowser&&(a=new Function("state","var rootState = state;\n        if (typeof Proxy !== 'undefined') {\n          rootState = new Proxy(rootState, {\n            set: function () {\n              return false;\n            },\n            get: function (target, key) {\n              if (key === 'state') {\n                return state;\n              }\n              return target[key]\n            }\n          });\n        }\n        with (rootState) {\n          ".concat(i?"return (".concat(e,");"):e,";\n        }")))}catch(e){sdk.Builder.isBrowser&&console.warn("Could not compile javascript",e)}try{return sdk.Builder.isBrowser?a(t||{}):new(0,safeDynamicRequire("vm2").VM)({sandbox:__assign(__assign({},t),{state:t})}).run(r.replace(/(^|;)return /,"$1"))}catch(t){n&&n.push(t),sdk.Builder.isBrowser?console.warn("Builder custom code error:",t.message,"in",e,t.stack):process.env.DEBUG&&console.debug("Builder custom code error:",t.message,"in",e,t.stack)}}};function searchToObject(e){var t=(e.search||"").substring(1).split("&"),n={};for(var r in t)if(t[r]&&"string"==typeof t[r]){var i=t[r].split("=");n[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return n}var BuilderComponent=function(e){function t(t){var n=e.call(this,t)||this;if(n.subscriptions=new sdk.Subscription,n.onStateChange=new sdk.BehaviorSubject(null),n.asServer=sdk.Builder.isServer,n.contentRef=null,n.styleRef=null,n.rootState=sdk.Builder.isServer?{}:onChange({},(function(){return n.updateState()})),n.lastJsCode="",n.lastHttpRequests={},n.httpSubscriptionPerKey={},n.firstLoad=!0,n.ref=null,n.messageListener=function(e){var t=e.data;switch(t.type){case"builder.updateSpacer":var r=t.data;n.rootState._spacer,n.updateState((function(e){e._spacer=r}));break;case"builder.resetState":var i=t.data,a=i.state;if(i.model===n.name){for(var o in n.rootState)"function"!=typeof n.rootState[o]&&delete n.rootState[o];Object.assign(n.rootState,a),n.setState(__assign(__assign({},n.state),{state:n.rootState,updates:(n.state&&n.state.updates||0)+1}))}break;case"builder.resetSymbolState":var s=t.data.state,l=(a=s.state,s.model,s.id);if(n.props.builderBlock&&n.props.builderBlock===l){for(var o in n.rootState)delete n.rootState[o];Object.assign(n.rootState,a),n.setState(__assign(__assign({},n.state),{state:n.rootState,updates:(n.state&&n.state.updates||0)+1}))}}},n.resizeFn=function(){var e=n.deviceSizeState;e!==n.state.state.deviceSize&&n.setState(__assign(__assign({},n.state),{updates:(n.state&&n.state.updates||0)+1,state:Object.assign(n.rootState,__assign(__assign({},n.state.state),{deviceSize:e}))}))},n.resizeListener=sdk.Builder.isEditing?throttle(n.resizeFn,200):debounce(n.resizeFn,400),n.mounted=!1,n.updateState=function(e){var t=n.rootState;e&&e(t),n.mounted?n.setState({update:n.updateState,state:t,updates:(n.state&&n.state.updates||0)+1}):n.state=__assign(__assign({},n.state),{update:n.updateState,state:t,updates:(n.state&&n.state.updates||0)+1}),n.notifyStateChange()},n.onContentLoaded=function(e,t){if("page"===n.name&&sdk.Builder.isBrowser&&e){var r=e.title,i=e.pageTitle,a=e.description,o=e.pageDescription;if((r||i)&&(document.title=r||i),a||o){var s=document.querySelector('meta[name="description"]');s||((s=document.createElement("meta")).setAttribute("name","description"),document.head.appendChild(s)),s.setAttribute("content",a||o)}}if(sdk.Builder.isEditing&&n.notifyStateChange(),n.props.contentLoaded&&n.props.contentLoaded(e,t),e&&e.inputs&&Array.isArray(e.inputs)&&e.inputs.length&&(e.state||(e.state={}),e.inputs.forEach((function(t){t&&t.name&&void 0!==t.defaultValue&&void 0===e.state[t.name]&&(e.state[t.name]=t.defaultValue)}))),e&&e.state){var l=__assign(__assign({},n.state),{updates:(n.state&&n.state.updates||0)+1,state:Object.assign(n.rootState,__assign(__assign(__assign(__assign({},n.state.state),{location:n.locationState,deviceSize:n.deviceSizeState,device:n.device}),e.state),n.props.data))});n.mounted?n.setState(l):n.state=l}if(e&&e.jsCode&&sdk.Builder.isBrowser&&!n.options.codegen){var u=!1;if(sdk.Builder.isEditing&&(n.lastJsCode===e.jsCode?u=!0:n.lastJsCode=e.jsCode),!u){var d=n.state.state;try{new Function("data","ref","state","update","element","Builder","builder","context",e.jsCode)(e,n,d,n.state.update,n.ref,sdk.Builder,sdk.builder,n.state.context)}catch(t){sdk.Builder.isBrowser?console.warn("Builder custom code error:",t.message,"in",e.jsCode,t.stack):process.env.DEBUG&&console.debug("Builder custom code error:",t.message,"in",e.jsCode,t.stack)}}}if(e&&e.httpRequests&&!n.props.noAsync&&!(u=!1)){var c=function(t){var r=e.httpRequests[t];if(r&&(!n.data[t]||sdk.Builder.isEditing))if(sdk.Builder.isBrowser){var i=n.evalExpression(r);if(sdk.Builder.isEditing&&n.lastHttpRequests[t]===i)return"continue";n.lastHttpRequests[t]=i;var a=r.match(/builder\.io\/api\/v2\/([^\/\?]+)/i);a&&a[1],n.handleRequest(t,i);var o=n.httpSubscriptionPerKey[t];o&&o.unsubscribe();var s=n.httpSubscriptionPerKey[t]=n.onStateChange.subscribe((function(){var e=n.evalExpression(r);e!==i&&(n.handleRequest(t,e),n.lastHttpRequests[t]=e)}));n.subscriptions.add(s)}else n.handleRequest(t,n.evalExpression(r))};for(var p in e.httpRequests)c(p)}},n.state={context:__assign(__assign({},t.context),{apiKey:sdk.builder.apiKey||n.props.apiKey}),state:Object.assign(n.rootState,__assign(__assign(__assign(__assign({},n.inlinedContent&&n.inlinedContent.data&&n.inlinedContent.data.state),{isBrowser:sdk.Builder.isBrowser,isServer:!sdk.Builder.isBrowser,_hydrate:t.hydrate,location:n.locationState,deviceSize:n.deviceSizeState,device:n.device}),n.getHtmlData()),t.data)),updates:0,key:0,update:n.updateState},sdk.Builder.isBrowser){var r=n.props.apiKey;if(r&&r!==n.builder.apiKey&&(n.builder.apiKey=r),n.inlinedContent){var i=n.inlinedContent.content||n.inlinedContent;n.onContentLoaded(null==i?void 0:i.data,getContentWithInfo(i))}}return n}return __extends(t,e),Object.defineProperty(t.prototype,"options",{get:function(){return __assign(__assign({},t.defaults),this.props)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.props.model||this.props.modelName||this.props.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.ref},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inlinedContent",{get:function(){if(!this.isPreviewing||this.props.inlineContent)return this.props.content},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"builder",{get:function(){return this.props.builder||sdk.builder},enumerable:!1,configurable:!0}),t.prototype.getHtmlData=function(){var e=this.inlinedContent&&this.inlinedContent.id||this.props.entry,t=e&&sdk.Builder.isBrowser&&document.querySelector('script[data-builder-json="'.concat(e,'"],script[data-builder-state="').concat(e,'"]'));if(t)try{return JSON.parse(t.innerText)}catch(e){console.warn("Could not parse Builder.io HTML data transfer",e,t.innerText)}return{}},Object.defineProperty(t.prototype,"device",{get:function(){return this.builder.getUserAttributes().device||"desktop"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locationState",{get:function(){return __assign(__assign({},pick(this.location,"pathname","hostname","search","host")),{path:this.location.pathname&&this.location.pathname.split("/").slice(1)||"",query:searchToObject(this.location)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceSizeState",{get:function(){return sdk.Builder.isBrowser?sizes.getSizeForWidth(window.innerWidth):sizeMap[this.device]||"large"},enumerable:!1,configurable:!0}),t.renderInto=function(e,n,r,i){if(void 0===n&&(n={}),void 0===r&&(r=!0),void 0===i&&(i=!1),console.debug("BuilderPage.renderInto",e,n,r,this),e){var a=null;if("string"==typeof e?a=document.querySelector(e):e instanceof Element&&(a=e),a){var o=a.classList.contains("builder-hydrated");if(!o||i){a.classList.add("builder-hydrated");var s=r&&a.innerHTML.includes("builder-block");if(!a.classList.contains("builder-component")){var l=a.querySelector(".builder-api-styles")||(a.previousElementSibling&&a.previousElementSibling.matches(".builder-api-styles")?a.previousElementSibling:null),u="";if(l)l.innerHTML.replace(/\/\*start:([^\*]+?)\*\/([\s\S]*?)\/\*end:([^\*]+?)\*\//g,(function(e,t,n){var r=null;try{r=document.querySelector('[data-emotion-css="'.concat(t,'"]'))}catch(e){console.warn(e)}return r?r.innerHTML=n:sdk.Builder.isEditing||(u+=e),e})),sdk.Builder.nextTick((function(){l.innerHTML=u}));var d=a.querySelector(".builder-component");d?a=d:s=!1}location.search.includes("builder.debug=true")&&console.debug("hydrate",s,a);var c=a;if(!o){var p=document.createElement("div");a.insertAdjacentElement("beforebegin",p),p.appendChild(a),c=p}if((sdk.Builder.isEditing||sdk.Builder.isBrowser&&location.search.includes("builder.preview="))&&(s=!1),s&&a){var f=ReactDOM__default.default.render(React__default.default.createElement(t,__assign({},n)),c,c.builderRootRef);return c.builderRootRef=f,f}var v=ReactDOM__default.default.render(React__default.default.createElement(t,__assign({},n)),c,c.builderRootRef);return c.builderRootRef=v,v}console.debug("Tried to hydrate multiple times")}}},t.prototype.componentDidMount=function(){var e,t=this;this.mounted=!0,this.asServer&&(this.asServer=!1,this.updateState((function(e){e.isBrowser=!0,e.isServer=!1}))),sdk.Builder.isIframe&&(null===(e=window.parent)||void 0===e||e.postMessage({type:"builder.sdkInjected",data:{modelName:this.name}},"*")),sdk.Builder.isBrowser&&(window.addEventListener("resize",this.resizeListener),sdk.Builder.isEditing&&window.addEventListener("message",this.messageListener),(sdk.Builder.isEditing||sdk.Builder.isPreviewing)&&sdk.Builder.nextTick((function(){t.firstLoad=!1,t.reload()})),setTimeout((function(){window.dispatchEvent(new CustomEvent("builder:component:load",{detail:{ref:t}}))})))},Object.defineProperty(t.prototype,"isPreviewing",{get:function(){return(sdk.Builder.isServer||sdk.Builder.isBrowser&&sdk.Builder.isPreviewing&&!this.firstLoad)&&sdk.builder.previewingModel===this.name},enumerable:!1,configurable:!0}),t.prototype.notifyStateChange=function(){if(!sdk.Builder.isServer&&this&&this.state){var e=this.state.state;this.props.onStateChange&&this.props.onStateChange(e),sdk.Builder.isBrowser&&window.dispatchEvent(new CustomEvent("builder:component:stateChange",{detail:{state:e,ref:this}})),this.onStateChange.next(e)}},t.prototype.processStateFromApi=function(e){return e},Object.defineProperty(t.prototype,"location",{get:function(){return this.props.location||(sdk.Builder.isBrowser?location:{})},enumerable:!1,configurable:!0}),t.prototype.getCssFromFont=function(e,t){var n=e.family+(e.kind&&!e.kind.includes("#")?", "+e.kind:""),r=n.split(",")[0],i=e.fileUrl?e.fileUrl:e.files&&e.files.regular,a="";if(i&&n&&r&&(a+='\n@font-face {\n  font-family: "'.concat(n,'";\n  src: local("').concat(r,"\"), url('").concat(i,"') format('woff2');\n  font-display: fallback;\n  font-weight: 400;\n}\n        ").trim()),e.files)for(var o in e.files){if(String(Number(o))===o){var s=e.files[o];s&&s!==i&&(a+='\n@font-face {\n  font-family: "'.concat(n,"\";\n  src: url('").concat(s,"') format('woff2');\n  font-display: fallback;\n  font-weight: ").concat(o,";\n}\n          ").trim())}}return a},t.prototype.componentWillUnmount=function(){this.unsubscribe(),sdk.Builder.isBrowser&&(window.removeEventListener("resize",this.resizeListener),window.removeEventListener("message",this.messageListener))},t.prototype.getFontCss=function(e){var t=this;return this.builder.allowCustomFonts&&(null==e?void 0:e.customFonts)&&e.customFonts.length&&e.customFonts.map((function(n){return t.getCssFromFont(n,e)})).join(" ")||""},t.prototype.ensureFontsLoaded=function(e){if(this.builder.allowCustomFonts&&(null==e?void 0:e.customFonts)&&Array.isArray(e.customFonts))for(var t=0,n=e.customFonts;t<n.length;t++){var r=n[t],i=r.fileUrl?r.fileUrl:r.files&&r.files.regular;if(!fontsLoaded.has(i)){var a=this.getCssFromFont(r,e);if(fontsLoaded.add(i),!a)continue;var o=document.createElement("style");o.className="builder-custom-font",o.setAttribute("data-builder-custom-font",i),o.innerHTML=a,document.head.appendChild(o)}}},t.prototype.getCss=function(e){var t,n=null===(t=this.useContent)||void 0===t?void 0:t.id,r=(null==e?void 0:e.cssCode)||"";return n&&(r=r.replace(/&/g,".builder-component-".concat(n))),r+this.getFontCss(e)},Object.defineProperty(t.prototype,"data",{get:function(){var e,t=__assign(__assign(__assign({},this.inlinedContent&&(null===(e=this.inlinedContent.data)||void 0===e?void 0:e.state)),this.props.data),this.state.state);return Object.assign(this.rootState,t),t},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(e){var t=this;this.props.data&&e.data!==this.props.data&&this.state.update((function(e){Object.assign(e,t.props.data)})),sdk.Builder.isEditing&&this.inlinedContent&&e.content!==this.inlinedContent&&this.onContentLoaded(this.inlinedContent.data,this.inlinedContent)},t.prototype.checkStyles=function(e){if(this.styleRef){var t=this.getCss(e);this.styleRef.innerHTML!==t&&(this.styleRef.innerHTML=t)}},t.prototype.reload=function(){this.setState({key:this.state.key+1})},Object.defineProperty(t.prototype,"content",{get:function(){var e=this.inlinedContent;return e&&e.content&&(e=__assign(__assign({},e),{data:e.content})),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useContent",{get:function(){return this.content||this.state.context.builderContent},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e,t=this,n=this.content,r=sdk.Builder.isBrowser&&this.props.data&&size(this.props.data)&&hash__default.default(this.props.data),i=sdk.Builder.isEditing?this.name:this.props.entry;i&&!sdk.Builder.isEditing&&r&&r.length<300&&(i+=":"+r);var a=this.props.dataOnly?React__default.default.Fragment:"div",o=null===(e=this.useContent)||void 0===e?void 0:e.id;return React__default.default.createElement(a,{onClick:function(e){!sdk.Builder.isEditing||t.props.isChild||t.props.stopClickPropagationWhenEditing||e.stopPropagation()},className:"builder-component ".concat(o?"builder-component-".concat(o):""),"data-name":this.name,"data-source":"Rendered by Builder.io",key:this.state.key,ref:function(e){return t.ref=e}},React__default.default.createElement(BuilderMetaContext.Consumer,null,(function(e){return React__default.default.createElement(BuilderMetaContext.Provider,{value:"boolean"==typeof t.props.ampMode?__assign(__assign({},e),{ampMode:t.props.ampMode}):e},React__default.default.createElement(BuilderAsyncRequestsContext.Consumer,null,(function(e){var r;return t._asyncRequests=e&&e.requests,t._errors=e&&e.errors,t._logs=e&&e.logs,React__default.default.createElement(BuilderContent,{isStatic:t.props.isStatic||sdk.Builder.isStatic,key:(null===(r=t.inlinedContent)||void 0===r?void 0:r.id)||("content"in t.props&&!t.isPreviewing?"null-content-prop":"no-content-prop"),builder:t.builder,ref:function(e){return t.contentRef=e},contentLoaded:function(e,n){return t.onContentLoaded(e,n)},options:__assign(__assign(__assign(__assign(__assign({key:i,entry:t.props.entry},n&&{initialContent:[n]}),!n&&"content"in t.props&&!t.isPreviewing&&{initialContent:[]}),t.props.url&&{url:t.props.url}),t.props.options),t.options.codegen&&{format:"react"}),inline:t.props.inlineContent||!t.isPreviewing&&"content"in t.props,contentError:t.props.contentError,modelName:t.name||"page"},(function(e,n,r){var i;if(t.props.dataOnly)return null;r&&r.id&&(t.state.context.builderContent=r),sdk.Builder.isBrowser&&sdk.Builder.nextTick((function(){t.checkStyles(e)}));var a=t.options.codegen;if(a&&!t.Component&&(null==e?void 0:e.blocksJs)){var o=Array.from(new Set(sdk.Builder.components.map((function(e){return e.name})))),s=sdk.Builder.components.slice().reverse(),l=o.map((function(e){return s.find((function(t){return t.class&&t.name===e}))})),u=o.map((function(e){return(e||"").replace(/[^\w]+/gi,"")})),d=l.map((function(e){return wrapComponent(e)}));t.Component=(new(Function.bind.apply(Function,__spreadArray(__spreadArray([void 0,"jsx","_css","Builder","builder","React","useBuilderState"],u,!1),[e.blocksJs])))).apply(void 0,__spreadArray([core.jsx,core.css,sdk.Builder,sdk.builder,React__default.default,function(e){var t=React__default.default.useState(0)[1];return React__default.default.useState((function(){return onChange(e,(function(){t((function(e){return e+1}))}))}))[0]}],d))}return e?React__default.default.createElement("div",{"data-builder-component":t.name,"data-builder-content-id":r.id,"data-builder-variation-id":r.testVariationId||r.variationId||r.id},!a&&t.getCss(e)&&React__default.default.createElement("style",{ref:function(e){return t.styleRef=e},className:"builder-custom-styles",dangerouslySetInnerHTML:{__html:t.getCss(e)}}),React__default.default.createElement(BuilderStoreContext.Provider,{value:__assign(__assign({},t.state),{rootState:t.rootState,state:t.data,content:r,renderLink:t.props.renderLink})},a&&t.Component?React__default.default.createElement(t.Component,{data:t.data,context:t.state.context}):React__default.default.createElement(BuilderBlocks,{key:String(!!(null===(i=null==e?void 0:e.blocks)||void 0===i?void 0:i.length)),emailMode:t.props.emailMode,fieldName:"blocks",blocks:e.blocks}))):n?React__default.default.createElement("div",{"data-builder-component":t.name,className:"builder-loading"},t.props.children):React__default.default.createElement("div",{"data-builder-component":t.name,className:"builder-no-content"})}))})))})))},t.prototype.evalExpression=function(e){var t=this,n=this.data;return e.replace(/{{([^}]+)}}/g,(function(e,r){return tryEval(r,n,t._errors)}))},t.prototype.handleRequest=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,r,i,a,o=this;return __generator(this,(function(s){return sdk.Builder.isIframe&&fetchCache[t]?(this.updateState((function(n){n[e]=fetchCache[t]})),[2,fetchCache[t]]):(n=function(){return __awaiter(o,void 0,void 0,(function(){var n,r,i;return __generator(this,(function(a){switch(a.label){case 0:n=Date.now(),sdk.Builder.isBrowser||console.time("Fetch "+t),a.label=1;case 1:return a.trys.push([1,4,5,6]),[4,fetch(t)];case 2:return[4,a.sent().json()];case 3:return r=a.sent(),[3,6];case 4:return i=a.sent(),this._errors&&this._errors.push(i),this._logs&&this._logs.push("Fetch to ".concat(t," errored in ").concat(Date.now()-n,"ms")),[2];case 5:return sdk.Builder.isBrowser||(console.timeEnd("Fetch "+t),this._logs&&this._logs.push("Fetched ".concat(t," in ").concat(Date.now()-n,"ms"))),[7];case 6:return r&&(sdk.Builder.isIframe&&(fetchCache[t]=r),this.updateState((function(t){t[e]=r}))),[2,r]}}))}))},(r=this._asyncRequests&&this._asyncRequests.find((function(e){return isRequestInfo(e)&&e.url===t})))?((i=r.promise).then((function(t){t&&o.updateState((function(n){n[e]=t}))})),[2,i]):(a=n(),sdk.Builder.nextTick((function(){o._asyncRequests&&o._asyncRequests.push(a)})),[2,a]))}))}))},t.prototype.unsubscribe=function(){this.subscriptions&&(this.subscriptions.unsubscribe(),this.subscriptions=new sdk.Subscription)},t.prototype.handleBuilderRequest=function(e,t){var n=this,r=tryEval(t,this.data,this._errors);this.subscriptions&&this.unsubscribe(),r&&this.subscriptions.add(this.builder.queueGetContent(r.model,r).subscribe((function(t){t&&n.updateState((function(n){n[e]=t}))})))},t.defaults={codegen:Boolean(sdk.Builder.isBrowser&&location.href.includes("builder.codegen=true"))},__decorate([debounceNextTick,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],t.prototype,"notifyStateChange",null),t}(React__default.default.Component),withChildren=function(e){var t=React__default.default.forwardRef((function(t,n){var r=t.children||t.builderBlock&&t.builderBlock.children&&t.builderBlock.children.map((function(e){return React__default.default.createElement(BuilderBlock,{key:e.id,block:e})}));return React__default.default.createElement(e,__assign({},t,{ref:n}),r)}));return t.builderOptions={canHaveChildren:!0},t};sdk.Builder.isReact=!0,Object.defineProperty(exports,"Builder",{enumerable:!0,get:function(){return sdk.Builder}}),Object.defineProperty(exports,"builder",{enumerable:!0,get:function(){return sdk.builder}}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return sdk.builder}}),exports.BuilderAsyncRequestsContext=BuilderAsyncRequestsContext,exports.BuilderBlockComponent=BuilderBlock,exports.BuilderBlocks=BuilderBlocks,exports.BuilderComponent=BuilderComponent,exports.BuilderContent=BuilderContent,exports.BuilderMetaContext=BuilderMetaContext,exports.BuilderPage=BuilderComponent,exports.BuilderStoreContext=BuilderStoreContext,exports.stringToFunction=stringToFunction,exports.withChildren=withChildren;
//# sourceMappingURL=builder-react-lite.cjs.js.map
